/* ContextRosker v1.0.1 - 09/03/2015
   http://ikergune.com
   Copyright (c) 2015 IÃ±igo Gonzalez Vazquez <ingonza85@gmail.com> (@haas85) - Under MIT License */
(function(){window.CB=function(){var a,b,c,d,e,f,g,h,i,j;i={cburl:"http://localhost:10101"};a="%27";b=function(a){var b,c;if(a!=null){c=[];for(b in a){c.push(i[b]=a[b])}return c}else{return i}};c=function(b,c,d){var e;if(c==null){c="NotYet"}d["firosstamp"]=(new Date).getTime();e=new RegExp('"',"g");return{name:b,type:c,value:JSON.stringify(d).replace(e,a)}};g=function(b){var c;c=new RegExp(a,"g");return JSON.parse(b.replace(c,'"'))};h=function(a,b,c,d){var e;if(b==null){b="ROBOT"}if(c==null){c=[]}e={url:""+i.cburl+"/NGSI10/updateContext",method:"POST",accepts:"application/json; charset=utf-8",dataType:"json",crossDomain:true,data:j(a,b,c),success:function(a){if(d!=null){return d.call(d,a)}},error:function(a,b,c){if(d!=null){return d.call(d)}}};return $.ajax(e)};f=function(a,b,c,d){var e;if(b==null){b="ROBOT"}e={url:""+i.cburl+"/NGSI10/queryContext",method:"POST",accepts:"application/json; charset=utf-8",dataType:"json",crossDomain:true,data:{entities:[{type:b,isPattern:c,id:a}]},success:function(a){if(d!=null){return d.call(d,a)}},error:function(a,b,c){if(d!=null){return d.call(d)}}};return $.ajax(e)};j=function(a,b,c){var d,e,f,g;if(c==null){c=[]}e=[];for(f=0,g=c.length;f<g;f++){d=c[f];e.push(d.name)}c.unshift({name:"COMMAND",type:"COMMAND",value:e});return{contextElements:[{id:a,type:b,isPattern:"false",attributes:c}],updateAction:"APPEND"}};e=function(a,b){var c;c={entities:[{id:a.id||".*",type:a.type||"ROBOT",isPattern:a.pattern||"true"}]};a={url:""+i.cburl+"/NGSI9/discoverContextAvailability",method:"POST",accepts:"application/json; charset=utf-8",dataType:"json",crossDomain:true,data:c,success:function(a){if(b!=null){return b.call(b,a)}},error:function(a,c,d){if(b!=null){return b.call(b)}}};return $.ajax(a)};d=function(a){var b;b={id:".*",type:"ROBOT",isPattern:"true"};return this.getContext(b,a)};return{config:b,createContent:c,parseValue:g,sendData:h,getData:f,getContext:e,getAllRobots:d}}()}).call(this);